(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{735:function(n,e,t){"use strict";t.r(e);var d=t(0),f=t.n(d),a=t(93),b=t(77),h=t(564),m=t(730),v=t(103),g=t(92),x=t(732),s=t(555),p=t(39),w=t(250),r=t(23);function o(){var n=I(["\n    .change-pwo-input{\n        width:400px;\n        height:40px;\n        margin-bottom:10px;\n        &:hover{\n            border: 1px solid #55a12f;\n        }\n        &:focus{\n            border: 1px solid #55a12f;\n            box-shadow:none;\n        }\n        &::placeholder{\n            font-size:14px;\n        }\n    }\n"]);return o=function(){return n},n}function i(){var n=I(["\n    font-size:14px;\n    color:#333;\n    margin-top:10px;\n    margin-bottom:10px;\n"]);return i=function(){return n},n}function c(){var n=I(["\n    padding:0 30px;\n    flex:2;\n    height:100%;\n    .ant-tabs-nav .ant-tabs-tab:hover{\n        color:#333;\n    }\n    .ant-tabs-nav .ant-tabs-tab-active{\n        color:#333;\n    }\n    .ant-tabs-tab{\n        color:#999;\n    }\n    .ant-tabs-bar{\n        height:60px;\n        border-bottom: 1px solid #f7f7f7;\n    }\n    .ant-tabs-extra-content button{\n        width:70px;\n        height:30px;\n        margin-top:15px;\n        background:#55a12f;\n        color:#fff;\n        &:focus{\n            border:none;\n        }\n        &:hover{\n            border:none;\n        }\n    }\n    .ant-tabs-nav .ant-tabs-tab{\n        padding:20px 16px;\n    }\n    .ant-tabs-ink-bar{\n        background-color: #55a12f;\n    }\n"]);return c=function(){return n},n}function u(){var n=I(["\n    width:340px;\n    margin:0 auto;\n    padding:20px 30px 5px;\n    background:#fff;\n    border-radius:5px;\n    position:relative;\n    margin-bottom:30px;\n    font-size:14px;\n    color:#333;\n    line-height:25px;\n    .iconfont{\n        display:block;\n        position:absolute;\n        color:#333;\n        width:20px;\n        height:20px;\n        border-radius:50%;\n        background:#dcdcdc;\n        text-align:center;\n        line-height:20px;\n        transform:scale(1.3);\n        right:-10px;\n        top:-10px;\n        cursor:default;\n    }\n\n    .todoTime,.todoSource{\n        line-height:20px;\n        padding:10px 0;\n        margin-top:0px;\n    }\n    .todoTime{\n        float:left;\n        font-size:12px;\n        color:#999;\n    }\n    .todoSource{\n        float:right;\n        font-size:12px;\n        color:#999;\n        span{\n            font-size:14px;\n            color:#333;\n        }\n    }\n    .clear{\n        clear:both;\n    }\n"]);return u=function(){return n},n}function l(){var n=I(["\n    font-size:16px;\n    color:#333;\n    margin-top:25px;\n    padding-left:30px;\n    margin-bottom:20px;\n"]);return l=function(){return n},n}function y(){var n=I(["\n    display:inline-block;\n    font-size:14px;\n    color:#999;\n"]);return y=function(){return n},n}function E(){var n=I(["\n    display:inline-block;\n    font-size:14px;\n    color:#999;\n    margin-right:50px;\n"]);return E=function(){return n},n}function O(){var n=I(["\n    margin-top:35px;\n    margin-bottom: 10px;\n"]);return O=function(){return n},n}function k(){var n=I(["\n    font-size:14px;\n    color:#55a12f;\n"]);return k=function(){return n},n}function j(){var n=I(["\n    font-size:20px;\n    color:#55a12f;\n"]);return j=function(){return n},n}function P(){var n=I(["\n    width:340px;\n    margin:0 auto;\n    padding:20px 30px 5px;\n    background:#fff;\n    border-radius:5px;\n    box-shadow: 0 3px 5px 0px #dcdcdc;\n"]);return P=function(){return n},n}function S(){var n=I(["\n    width:400px;\n    height:100%;\n    position:relative;\n    overflow-y:auto;\n    background:#f7f7f7;\n    &::-webkit-scrollbar-track-piece { \n        background-color:#f7f7f7;\n    }\n    &.editSrollBar::-webkit-scrollbar{\n        width: 8px;\n    }\n    &.editSrollBar::-webkit-scrollbar-thumb\n    {\n        background-color:#f6f6f6;\n        border-radius: 4px;\n        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);\n    }\n    .mine-title{\n        font-size:16px;\n        color:#333;\n        line-height:60px;\n        padding-left:30px;\n    }\n    .empty{\n        color:#999;\n        font-size:12px;\n    }\n"]);return S=function(){return n},n}function N(){var n=I(["\n    height:100%;\n    flex:2;\n    display:flex;\n"]);return N=function(){return n},n}function T(){var n=I(["\n    display:flex;\n    height:100%;\n"]);return T=function(){return n},n}function I(n,e){return e=e||n.slice(0),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var z=r.b.div(T()),M=r.b.div(N()),_=r.b.div(S()),C=r.b.div(P()),U=r.b.span(j()),D=r.b.span(k()),B=r.b.div(O()),J=r.b.div(E()),F=r.b.div(y()),R=r.b.div(l()),q=r.b.div(u()),A=r.b.div(c()),G=r.b.p(i()),H=r.b.div(o());function K(n){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function L(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function Q(n){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function V(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function W(n,e){return(W=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}var X=function(){function t(n){var e;return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(n,e){return!e||"object"!==K(e)&&"function"!=typeof e?V(n):e}(this,Q(t).call(this,n))).state={userId:JSON.parse(sessionStorage.getItem("user")).userId,login:Object(p.u)("token"),panelType:1,data:[],mineData:[],user:JSON.parse(sessionStorage.getItem("user"))},e.handleUptodo=e.handleUptodo.bind(V(e)),e}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&W(n,e)}(t,d["PureComponent"]),function(n,e,t){e&&L(n.prototype,e),t&&L(n,t)}(t,[{key:"render",value:function(){var t=this,n=m.a.TabPane,e=this.props,a=e.changeOldPwd,r=e.changeNewTel,o=this.state,i=o.login,c=o.panelType,u=this.state.user,l="";u&&(1===u.userType?l="用户管理员":2===u.userType?l="客户经理":3===u.userType?l="审核员":4===u.userType&&(l="业务管理员"));var s=this.state.mineData,p=f.a.createElement(v.a,{onClick:function(){t.props.handleSave(c,t.oldPwd,t.newPwd,t.aginNewPwd,t.changeOldPwd,t.changeNewTel,u,a,r)}},"保存");return i?f.a.createElement(z,null,f.a.createElement(h.a,null),f.a.createElement(M,null,f.a.createElement(_,{className:"editSrollBar"},f.a.createElement("p",{className:"mine-title"},"我的"),f.a.createElement(C,null,f.a.createElement("div",null,f.a.createElement(U,null,u.name," "),f.a.createElement(D,null," / ",l)),f.a.createElement(B,null,f.a.createElement(J,null,u.mobilePhone),f.a.createElement(F,null,u.idcard))),"客户经理"===l?f.a.createElement(d.Fragment,null,f.a.createElement(R,null,"待办事项"),s?s.map(function(n,e){return f.a.createElement(q,{key:n.todoId},n.content,f.a.createElement("span",{className:"iconfont",onClick:function(){t.updateTodolist(n.todoId,e,s)}},"×"),f.a.createElement("div",null,f.a.createElement("div",{className:"todoTime"},n.createTime),f.a.createElement("div",{className:"todoSource"},"来自",f.a.createElement("span",null,n.sourceName)),f.a.createElement("div",{className:"clear"})))}):f.a.createElement(g.a,{description:"暂无事项",className:"empty"})):""),f.a.createElement(A,null,f.a.createElement(m.a,{tabBarExtraContent:p,onTabClick:function(n){t.setState({panelType:n})}},f.a.createElement(n,{tab:"修改密码",key:"1"},f.a.createElement(H,null,f.a.createElement(G,null,"旧密码"),f.a.createElement(x.a,{className:"change-pwo-input",placeholder:"请输入旧密码",type:"password",ref:function(n){return t.oldPwd=n}}),f.a.createElement(G,null,"新密码"),f.a.createElement(x.a,{className:"change-pwo-input",placeholder:"请输入新密码",type:"password",ref:function(n){return t.newPwd=n}}),f.a.createElement(G,null,"确认新密码"),f.a.createElement(x.a,{className:"change-pwo-input",placeholder:"请再次输入新密码",type:"password",ref:function(n){return t.aginNewPwd=n}}))),f.a.createElement(n,{tab:"更换手机号码",key:"2"},f.a.createElement(H,null,f.a.createElement(G,null,"密码"),f.a.createElement(x.a,{className:"change-pwo-input",placeholder:"请输入登录密码",ref:function(n){return t.changeOldPwd=n},type:"password"}),f.a.createElement(G,null,"新手机号"),f.a.createElement(x.a,{className:"change-pwo-input",placeholder:"请输入新手机号码",ref:function(n){return t.changeNewTel=n}}))))))):f.a.createElement(b.c,{to:"/login"})}},{key:"componentDidMount",value:function(){this.handleUptodo()}},{key:"componentDidUpdate",value:function(){var n=this;this.props.minetel&&this.setState({user:Object(p.u)("user")},function(){n.props.handleMinetel(!1)})}},{key:"handelChange",value:function(n,e){this.props.dishandleMbile(n,e.input.value)}},{key:"updateTodolist",value:function(n,e,t){var a=this,r={todoId:n};Object(p.f)(r).then(function(n){var e=n.data;1===e.code&&"success"===e.msg?(s.a.success("消息已关闭"),a.handleUptodo()):s.a.success(e.msg)})}},{key:"handleUptodo",value:function(){var t=this,n={userId:this.state.userId};Object(p.y)(n).then(function(n){var e=n.data;1===e.code&&"success"===e.msg&&(e.data,t.setState({mineData:e.data}))})}}]),t}();e.default=Object(a.connect)(function(n){return{changeOldPwd:n.getIn(["mine","changeOldPwd"]),changeNewTel:n.getIn(["mine","changeNewTel"]),minetel:n.getIn(["mine","minetel"])}},function(l){return{handleSave:function(n,a,r,o,i,c,e){var t={};if(1===n)Object(p.u)("changepwd")?r.input.value?r.input.value!==o.input.value?s.a.error("两次输入密码不一致"):(t={userId:Object(p.u)("user").userId,oldPwd:a.input.value,password:r.input.value},Object(p.b)(t,Object(p.u)("token")).then(function(n){var e=n.data;if(1===e.code&&"success"===e.msg){Object(p.v)("changepwd",!1);var t=w.a.changepwd(Object(p.u)("changepwd"));l(t),s.a.success("修改成功"),r.input.value="",o.input.value=""}}).catch(function(n){})):s.a.error("请输入新密码"):a.input.value?r.input.value?r.input.value!==o.input.value?s.a.error("两次输入密码不一致"):(t={userId:Object(p.u)("user").userId,oldPwd:a.input.value,password:r.input.value},Object(p.b)(t,Object(p.u)("token")).then(function(n){var e=n.data;if(1===e.code&&"success"===e.msg){Object(p.v)("changepwd",!1);var t=w.a.changepwd(Object(p.u)("changepwd"));l(t),s.a.success("修改成功"),a.input.value="",r.input.value="",o.input.value=""}}).catch(function(n){})):s.a.error("请输入新密码"):s.a.error("请输入旧密码");else{Object(p.u)("changepwd");if(!i.input.value)return void s.a.error("请填写密码");if(!p.i.test(c.input.value))return void s.a.error("请输入正确的手机号");var u={userId:e.userId,password:i.input.value,mobilePhone:c.input.value};Object(p.d)(u).then(function(n){var e=n.data;if(1===e.code&&"success"===e.msg){s.a.success("修改成功");var t=Object(p.u)("user");t.mobilePhone=c.input.value,Object(p.v)("user",t);var a=w.a.changeMinetel(!0);l(a),i.input.value="",c.input.value="";var r=w.a.changeMobile(1,"");l(r);var o=w.a.changeMobile(2,"");l(o)}else s.a.error(e.msg)})}},dishandleMbile:function(n,e){var t=w.a.changeMobile(n,e);l(t)},handleMineStatus:function(n){var e=w.a.changeMineStatus(n);l(e)},handleMinetel:function(n){var e=w.a.changeMinetel(n);l(e)}}})(X)}}]);