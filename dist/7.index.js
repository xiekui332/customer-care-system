(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{734:function(e,t,a){"use strict";a.r(t);var I=a(0),O=a.n(I),n=a(93),l=a(77),r=a(564),s=a(181),D=a(731),P=a(554),w=a(727),k=a(92),j=a(555),_=a(39),A=a(565);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}(this,o(a).call(this,e))).state={isAdd:!1,search:!1,edit:!1,visible:!0,user:JSON.parse(sessionStorage.getItem("user")),load:!0,name:"",mobilePhone:"",companyName:"",yearlyTurnoverSymbol:"",yearlyTurnover:"",propertySymbol:"",property:"",liabilitiesSymbol:"",liabilities:"",demandAmountSymbol:"",demandAmount:"",pageNum:1,pageSize:10,customerId:"",totransfer:[]},t.handleCancelSearch=t.handleCancelSearch.bind(u(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,I["Component"]),function(e,t,a){t&&c(e.prototype,t),a&&c(e,a)}(a,[{key:"render",value:function(){var a=this,e=this.props.isAddAction,t=D.a.Option,n=[];this.props.homeList&&(n=this.props.homeList.toJS());var l=this.state,r=l.isAdd,i=l.search,s=l.edit,c=l.totransfer,o=l.yearlyTurnoverSymbol,u=l.propertySymbol,d=l.liabilitiesSymbol,m=l.demandAmountSymbol,p=JSON.parse(sessionStorage.getItem("user")),f=P.a.confirm;return O.a.createElement(A.i,{className:"customer",ref:function(e){a.modalWrapper=e}},O.a.createElement(A.w,null,3===p.userType?O.a.createElement(I.Fragment,null,O.a.createElement("span",null,"客户审核"),O.a.createElement(A.z,null)):O.a.createElement(I.Fragment,null,O.a.createElement("span",null,"客户管理"),O.a.createElement(A.z,null,4===p.userType?O.a.createElement(w.a,{title:"搜索",onClick:function(){a.handleSearchCustomer(i)}},O.a.createElement("div",{className:"reset-sousuo"})):O.a.createElement(I.Fragment,null,O.a.createElement(w.a,{title:"新建客户",onClick:function(){a.addCustomer(r)}},O.a.createElement("div",{className:"reset-jia"})),O.a.createElement(w.a,{title:"搜索",onClick:function(){a.handleSearchCustomer(i)}},O.a.createElement("div",{className:"reset-sousuo"})),O.a.createElement(w.a,{title:"管理",onClick:function(){a.handleEditCustomer(s,n,a.editWrapperEl,a.middleListWrapperEl)}},O.a.createElement("div",{className:"reset-bianji"})))))),O.a.createElement(A.y,{className:"editSrollBar",ref:function(e){a.middleListWrapperEl=e}},O.a.createElement(A.c,{className:r?"addcustomer-show":"",ref:function(e){a.addcusEl=e},onClick:function(){a.handleAdd(e,n)}},"新建客户"),O.a.createElement(A.J,{className:i?"searchWrapper":""},O.a.createElement(A.G,null,O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"客户姓名"),O.a.createElement(A.H,{placeholder:"请输入客户姓名",ref:function(e){a.cusName=e}})),O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"公司名称"),O.a.createElement(A.H,{placeholder:"请输入公司名称",ref:function(e){a.cusCompanyName=e}}))),O.a.createElement(A.I,null,O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"年营业额"),O.a.createElement(D.a,{style:{width:"50%"},showSearch:!0,placeholder:"请选择",onChange:function(e){a.handleyearlyTurnoverEl(e)},value:o,optionFilterProp:"children",filterOption:function(e,t){return 0<=t.props.children.toLowerCase().indexOf(e.toLowerCase())}},O.a.createElement(t,{value:">"},">"),O.a.createElement(t,{value:"<"},"<"),O.a.createElement(t,{value:"="},"=")),O.a.createElement(A.H,{className:"small-input",placeholder:"年营业额(万元)",ref:function(e){a.yearlyTurnoverEl=e}})),O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"资产情况"),O.a.createElement(D.a,{style:{width:"50%"},showSearch:!0,placeholder:"请选择",onChange:function(e){a.handlepropertyEl(e)},value:u,optionFilterProp:"children",filterOption:function(e,t){return 0<=t.props.children.toLowerCase().indexOf(e.toLowerCase())}},O.a.createElement(t,{value:">"},">"),O.a.createElement(t,{value:"<"},"<"),O.a.createElement(t,{value:"="},"=")),O.a.createElement(A.H,{className:"small-input",placeholder:"资产情况(万元)",ref:function(e){a.propertyEl=e}}))),O.a.createElement(A.I,null,O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"负债情况"),O.a.createElement(D.a,{style:{width:"50%"},showSearch:!0,placeholder:"请选择",onChange:function(e){a.handleliabilitiesEl(e)},value:d,optionFilterProp:"children",filterOption:function(e,t){return 0<=t.props.children.toLowerCase().indexOf(e.toLowerCase())}},O.a.createElement(t,{value:">"},">"),O.a.createElement(t,{value:"<"},"<"),O.a.createElement(t,{value:"="},"=")),O.a.createElement(A.H,{className:"small-input",placeholder:"负债情况(万元)",ref:function(e){a.liabilitiesEl=e}})),O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"需求金额"),O.a.createElement(D.a,{style:{width:"50%"},showSearch:!0,placeholder:"请选择",onChange:function(e){a.handledemandAmountEl(e)},value:m,optionFilterProp:"children",filterOption:function(e,t){return 0<=t.props.children.toLowerCase().indexOf(e.toLowerCase())}},O.a.createElement(t,{value:">"},">"),O.a.createElement(t,{value:"<"},"<"),O.a.createElement(t,{value:"="},"=")),O.a.createElement(A.H,{className:"small-input",placeholder:"需求金额(万元)",ref:function(e){a.demandAmountEl=e}}))),O.a.createElement(A.a,null,O.a.createElement(A.b,{className:"add-cancel",onClick:function(){a.handleCancelSearch(a.cusName,a.cusCompanyName)}},"取消"),O.a.createElement(A.b,{className:"add-save",onClick:function(){a.handleSaveSearch(a.cusName,a.cusCompanyName,a.yearlyTurnoverEl,a.propertyEl,a.liabilitiesEl,a.demandAmountEl)}},"查询"))),O.a.createElement(A.J,{className:i?"searchWrapper":""},3===p.userType?O.a.createElement(I.Fragment,null,O.a.createElement(A.G,null,O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"客户姓名"),O.a.createElement(A.H,{placeholder:"请输入客户姓名",ref:function(e){a.cusName=e}})),O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"公司名称"),O.a.createElement(A.H,{placeholder:"请输入公司名称",ref:function(e){a.cusCompanyName=e}}))),O.a.createElement(A.G,null,O.a.createElement("div",{className:"condition-select"},O.a.createElement("p",null,"手机号"),O.a.createElement(A.H,{placeholder:"请输入手机号",ref:function(e){a.cusTelName=e}})),O.a.createElement("div",{className:"condition-select condition-select-opacity"},O.a.createElement("p",null,"手机号"),O.a.createElement(A.H,{placeholder:"请输入手机号",readonly:"readonly",disabled:"disabled"}))),O.a.createElement(A.a,null,O.a.createElement(A.b,{className:"add-cancel",onClick:function(){a.handleCancelSearchNew(a.cusName,a.cusCompanyName,a.cusTelName)}},"取消"),O.a.createElement(A.b,{className:"add-save",onClick:function(){a.handleSaveSearchNew(a.cusName,a.cusCompanyName,a.cusTelName)}},"查询"))):""),n&&n.length?n.map(function(e,t){return O.a.createElement(A.x,{className:e.active?"selected list":" list",onClick:function(){a.handleList(n,e,t,e.customerId,e.active,s)},key:e.customerId},O.a.createElement("div",{className:s&&e.active?"iconfont same-active same-active2 click-active same-active3 reset-select":"iconfont same-active same-active2 reset-select"}),O.a.createElement(A.v,{className:s?"same-active same-active1 click-active":"same-active same-active1"}),e.photo?O.a.createElement("img",{src:e.photo,alt:""}):O.a.createElement("div",{className:"moren-img"}),O.a.createElement(A.j,null,O.a.createElement("p",null,O.a.createElement("span",null,e.name),O.a.createElement("span",null,e.mobilePhone)),O.a.createElement("p",null,e.companyName||"暂无公司信息")))}):O.a.createElement(k.a,{className:"",description:"暂无数据"})),O.a.createElement(A.m,{ref:function(e){a.editWrapperEl=e}},2===p.userType?O.a.createElement(A.l,{onClick:function(){a.handleToTransfer(a.transferWrapEl,n)}},O.a.createElement("div",{className:"reset-yijiao"}),O.a.createElement("p",null,"移交")):"",O.a.createElement(A.l,{onClick:function(){a.handledelete(f,n)}},O.a.createElement("div",{className:"reset-shanchu"}),O.a.createElement("p",null,"删除"))),O.a.createElement(A.P,{ref:function(e){a.transferWrapEl=e}},O.a.createElement(A.A,null,O.a.createElement("div",{className:"top-wrapper",onClick:function(){a.hideTotransfer(a.transferWrapEl)}}),O.a.createElement(A.L,{className:"editSrollBar"},c&&c.map(function(e,t){return O.a.createElement(A.N,{className:e.active?"active":"",key:e.cabinetNo,onClick:function(){a.handleTransfer(e,c)}},O.a.createElement(A.K,null,O.a.createElement("span",{className:"title"},e.name),O.a.createElement("span",{className:"mobile"},e.cabinetNo)),O.a.createElement(A.K,null))})),O.a.createElement("div",{className:"botton-wrapper"},O.a.createElement(A.M,{onClick:function(){a.sureTransfer(c,n,a.transferWrapEl)}},"确认移交")))))}},{key:"componentDidUpdate",value:function(){var e=this;this.props.changeAddStatus&&this.setState({load:!0,pageNum:1},function(){e.getListData()}),this.props.trans&&this.setState({load:!0,pageNum:1,name:"",companyName:"",yearlyTurnoverSymbol:"",yearlyTurnover:"",propertySymbol:"",property:"",liabilitiesSymbol:"",liabilities:"",demandAmountSymbol:"",demandAmount:""},function(){e.getListData()})}},{key:"componentDidMount",value:function(){var e=this;this.props.resetHeight(),this.getListData(),this.middleListWrapperEl.addEventListener("scroll",function(){e.scrollTop()+e.windowHeight()>=e.documentHeight()-50&&e.getListData("concatList")})}},{key:"scrollTop",value:function(){var e=this.middleListWrapperEl;return Math.max(e.scrollTop)}},{key:"documentHeight",value:function(){var e=this.middleListWrapperEl;return Math.max(e.scrollHeight)}},{key:"windowHeight",value:function(){var e=this.middleListWrapperEl;return e.compatMode,e.clientHeight}},{key:"componentWillUnmount",value:function(){this.middleListWrapperEl.onscroll=""}},{key:"handleyearlyTurnoverEl",value:function(e){this.setState({yearlyTurnoverSymbol:e})}},{key:"handlepropertyEl",value:function(e){this.setState({propertySymbol:e})}},{key:"handleliabilitiesEl",value:function(e){this.setState({liabilitiesSymbol:e})}},{key:"handledemandAmountEl",value:function(e){this.setState({demandAmountSymbol:e})}},{key:"unhtml",value:function(e){return e?e.replace(/[<">']/g,function(e){return{"<":"&lt;",">":"&gt;"}[e]}):""}},{key:"handleCancelSearch",value:function(e,t){this.setState({search:!1},function(){e.value="",t.value=""})}},{key:"handleCancelSearchNew",value:function(e,t,a){this.setState({search:!1},function(){e.value="",t.value="",a.value=""})}},{key:"handleSaveSearch",value:function(e,t,a,n,l,r){var i=this;this.setState({name:e.value,companyName:t.value,yearlyTurnover:a.value,property:n.value,liabilities:l.value,demandAmount:r.value,load:!0,pageNum:1},function(){i.getListData()})}},{key:"handleSaveSearchNew",value:function(e,t,a){var n=this;this.setState({name:e.value,companyName:t.value,mobilePhone:a.value,load:!0,pageNum:1},function(){n.getListData()})}},{key:"getListData",value:function(n){var l=this;if(this.props.handleChangeStatus(!1),this.props.handleChangeTrans(!1),this.state.load){var e=this.state.user,t=this.state,a=t.name,r=t.mobilePhone,i=t.companyName,s=t.yearlyTurnoverSymbol,c=t.yearlyTurnover,o=t.propertySymbol,u=t.property,d=t.liabilitiesSymbol,m=t.liabilities,p=t.demandAmountSymbol,f=t.demandAmount,h=t.pageNum,E=t.pageSize,v=e.userType,y={};2===v?y={name:a,mobilePhone:r,companyName:i,yearlyTurnoverSymbol:s,yearlyTurnover:c,propertySymbol:o,property:u,liabilitiesSymbol:d,liabilities:m,demandAmountSymbol:p,demandAmount:f,pageNum:h,pageSize:E}:3===v?y={name:a,mobilePhone:r,companyName:i,pageNum:h,pageSize:E}:4===v&&(y={name:a,mobilePhone:r,companyName:i,yearlyTurnoverSymbol:s,yearlyTurnover:c,propertySymbol:o,property:u,liabilitiesSymbol:d,liabilities:m,demandAmountSymbol:p,demandAmount:f,pageNum:h,pageSize:E}),this.setState({load:!1},function(){Object(_.o)(y,v).then(function(e){var t=e.data;if(1===t.code&&"success"===t.msg)if(l.setState({search:!1}),t.data&&t.data.list){t.data.list.map(function(e,t){return e.active=!1});var a=l.props.homeList;"concatList"===n?l.props.disCusList(a.concat(t.data.list)):l.props.disCusList(t.data.list),t.data.hasNextPage?l.setState({load:!0,pageNum:t.data.pageNum+1}):l.setState({load:!1})}else l.props.disCusList([]);else j.a.error(t.msg)})})}}},{key:"addCustomer",value:function(e){this.setState({isAdd:!this.state.isAdd,search:!1})}},{key:"handleSearchCustomer",value:function(e){this.setState({search:!this.state.search,isAdd:!1})}},{key:"handleSearchCustomerNew",value:function(){this.setState({search:!this.state.search,isAdd:!1})}},{key:"handleEditCustomer",value:function(e,t,a,n){var l=this;this.setState({edit:!this.state.edit,isAdd:!1,search:!1},function(){l.state.edit?(l.props.disCusList(t),a.classList.add("editWrapper-active"),n.classList.add("middleListWrapper-active")):(t.map(function(e,t){return e.active=!1}),l.props.disCusList(t),a.classList.remove("editWrapper-active"),n.classList.remove("middleListWrapper-active"))})}},{key:"handleList",value:function(e,t,a,n,l,r){var i=this;if(this.props.isAddAction({isAdd:!1}),this.props.handleCusEdit(!1),r){e[a].active=!e[a].active,this.props.disCusList(e);var s=[];e.map(function(e,t){return e.active?s.push(e.customerId):""}),s.length?this.props.disShowDetail(!0):this.props.disShowDetail(!1);var c={};if(l){if(!s.length)return;c={id:s[s.length-1]}}else c={id:n};this.props.disSpin(!0),this.props.disShowDetail(!0),Object(_.n)(c).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?t.data?(i.props.disCusDetail(t.data),i.props.disSpin(!1)):j.a.error("暂无数据"):j.a.error(t.msg)})}else{if(l)return;for(var o=0;o<e.length;o++)e[o].active=!1;e[a].active=!0,this.props.disShowDetail(!0),this.props.disSpin(!0),this.props.disCusList(e);var u={id:n};Object(_.n)(u).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?t.data?(i.props.disCusDetail(t.data),i.props.disSpin(!1)):j.a.error("暂无数据"):j.a.error(t.msg)})}this.props.dishandlenone(!0)}},{key:"handledelete",value:function(e,t){var a=[],n=this;t.map(function(e,t){return e.active?a.push(e.customerId):""});var l={customerIds:a.join(",")};a.length?e({title:"确认删除?",okText:"确定",cancelText:"取消",onOk:function(){Object(_.r)(l).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?(j.a.success("删除成功"),n.setState({load:!0,pageNum:1,pageSize:10,name:"",companyName:"",yearlyTurnoverSymbol:"",yearlyTurnover:"",propertySymbol:"",property:"",liabilitiesSymbol:"",liabilities:"",demandAmountSymbol:"",demandAmount:""},function(){n.props.disShowDetail(!1),n.getListData()})):j.a.error(t.msg)})},onCancel:function(){}}):j.a.info("请先选择客户")}},{key:"handleAdd",value:function(e,t){var a=this;t.map(function(e,t){return e.active=!1}),this.props.disCusList(t),this.setState({customerId:"",isAdd:!1},function(){e({isAdd:!0});a.props.disShowDetail(!1),a.props.handleCusEdit(!1),a.props.disCusDetail({})})}},{key:"handleTransfer",value:function(e,t){var a=t;a.map(function(e){return e.active=!1}),e.active=!0,this.setState({totransfer:a},function(){})}},{key:"handleToTransfer",value:function(e,t){var a=this,n=[];t.map(function(e,t){return!0===e.active?n.push(e):""}),Object(_.x)().then(function(e){var t=e.data;t.data?(t.data.map(function(e,t){return e.active=!1}),a.setState({totransfer:t.data})):j.a.error(t.msg)}),n.length?e.classList.add("active"):j.a.info("请先选择要移交的客户")}},{key:"hideTotransfer",value:function(e){e.classList.remove("active")}},{key:"sureTransfer",value:function(e,t,a){var n=this,l=[],r="";t.map(function(e){return e.active?l.push(e.customerId):""}),e.map(function(e){return e.active?r=e.userId:""});var i={customerIds:l.join(","),newUserId:r};r?Object(_.w)(i).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?(j.a.success("移交成功"),n.setState({load:!0,pageNum:1,name:"",companyName:"",yearlyTurnoverSymbol:"",yearlyTurnover:"",propertySymbol:"",property:"",liabilitiesSymbol:"",liabilities:"",demandAmountSymbol:"",demandAmount:""},function(){n.getListData();n.props.isAddAction({isAdd:!1}),n.props.disShowDetail(!1)}),a.classList.remove("active")):j.a.error(t.msg)}):j.a.info("请选择一个客户经理")}}]),a}(),p=Object(n.connect)(function(e){return{isAdd:e.getIn(["left","isAdd"]),isEdit:e.getIn(["left","isEdit"]),homeList:e.getIn(["left","homeList"]),changeAddStatus:e.getIn(["left","changeAddStatus"]),trans:e.getIn(["left","trans"])}},function(a){return{disCusList:function(e){var t=s.a.getMiddleList(e);a(t)},resetHeight:function(){var e=document.body.clientHeight;document.getElementsByClassName("editSrollBar")[0].style.height=e-60+"px"},isAddAction:function(e){var t=s.a.changeIsAdd(e);a(t)},disCusDetail:function(e){var t=s.a.changeCusDetail(e);a(t)},disShowDetail:function(e){var t=s.a.changeShowDetail(e);a(t)},disSpin:function(e){var t=s.a.changeSpin(e);a(t)},handleChangeStatus:function(e){var t=s.a.changeAddStatus(e);a(t)},handleCusEdit:function(e){var t=s.a.changeCusEdit(e);a(t)},dishandlenone:function(e){var t=s.a.changenofileList(e);a(t)},handleChangeTrans:function(e){var t=s.a.changeTransStatus(e);a(t)}}})(m),z=a(732),R=a(729),L=a(728),F=a(733),B=a(33),V=a(103),f=a(23);function h(){var e=q(["\n    width:300px;\n    border:1px solid #dcdcdc;\n    border-radius:5px;\n    line-height:30px;\n    float:left;\n    font-size:13px;\n    padding-left:10px;\n"]);return h=function(){return e},e}function E(){var e=q(["\n    width:400px;\n    overflow:hidden;\n    margin: 0px 0 10px 220px;\n    float: left;\n    &:first-child{\n        margin-top:-20px;\n    }\n    & .iconfont{\n        display:block;\n        float:left;\n        margin:0 0 0 30px;\n    }\n"]);return E=function(){return e},e}function v(){var e=q(["\n    overflow:hidden;\n    margin-top:10px;\n"]);return v=function(){return e},e}function y(){var e=q(["\n    width:460px;\n    min-height:100px;\n    margin-left: 170px;\n    .uploadButton{\n        margin-top:0px;\n    }\n    .clearfix-two{\n        width:350px;\n        margin-left: 50px;\n        .ant-upload-list-text{\n            display:none;\n        }\n    }\n    .ant-upload.ant-upload-select-picture-card{\n        margin-left:50px;\n    }\n"]);return y=function(){return e},e}function g(){var e=q(["\n    overflow:hidden;\n"]);return g=function(){return e},e}function b(){var e=q(["\n    width:100%;\n    height:30px;\n    color:#666;\n    font-size:12px;\n    padding-left:20px;\n    line-height:30px;\n    border-bottom:1px solid #dcdcdc;\n    &:last-child{\n        border-bottom:none;\n    }\n    &:hover{\n        background:#55a12f;\n        color:#FFF;\n    }\n"]);return b=function(){return e},e}function N(){var e=q(["\n    width:400px;\n    border:1px solid #dcdcdc;\n    margin-top:-15px;\n    margin-left: 110px;\n    height:0px;\n    overflow:hidden;\n    transition: all ease-in .1s;\n    opacity:0;\n    box-shadow:0px 1px 4px rgba(0,0,0,0.3);\n    border-radius:1px;\n    &.add-ul-show{\n        height:auto;\n        opacity:1;\n    }\n"]);return N=function(){return e},e}function S(){var e=q(["\n    width:400px;\n    height:30px;\n    position:relative;\n    float:left;\n    transition:all ease-in .1s;\n    .add-input{\n        border:none;\n        width:400px;\n        height:30px;\n        padding:0 10px;\n        border-radius:4px;\n        outline:none;\n        border:1px solid #dcdcdc;\n        background:#fff;\n    }\n    .add-input::placeholder{\n        font-size:12px;\n        color:#999;\n    }\n    .add-input:focus{\n        border:1px solid #55a12f;\n    }\n    & .add-input:hover{\n        border:1px solid #55a12f;\n    }\n    >.iconfont{\n        position:absolute;\n        right:5px;\n        top:-20px;\n    }\n"]);return S=function(){return e},e}function x(){var e=q(["\n    .ant-select-selection__placeholder, .ant-select-search__field__placeholder{\n        font-size:13px;\n    }\n    &>.active{\n        border:1px solid red!important;\n    }\n    &.clear-fix{\n        clear:both;\n        margin-bottom: 10px;\n        .ant-select-selection__placeholder, .dEozpO .ant-select-search__field__placeholder{\n            font-size:14px;\n        }\n    }\n    &.clear-fix-new{\n        margin-top: 20px;\n        .mid-line{\n            border-top:1px solid #ddd;\n            width: 100%;\n            margin-left: 220px;\n            margin-bottom: 50px;\n            margin-top: 30px;\n        }\n    }\n    .msg-textarea{\n        width: 360px;\n    }\n    \n    &>.add-input{\n        width: 60%;\n        font-size:14px;\n        outline:none;\n        height:30px;\n        border:1px solid #dcdcdc;\n        border-radius:4px;\n        padding:0 10px;\n    }\n    &>.add-input::placeholder{\n        color:#bfbfbf;\n        font-size:14px;\n    }\n        \n    &>.add-input:hover{\n        border:1px solid #55a12f;\n    }\n    &>.add-input:focus{\n        border:1px solid #55a12f;\n    }\n    transition:all ease-in .1s;\n    >.add-input::placeholder{\n        font-size:14px;\n    }\n\n    .add-number{\n        float:right;\n        line-height:30px;\n        margin-right:50px;\n    }\n    .radio-group{\n        margin-top:5px;\n    }\n    .ant-radio-checked .ant-radio-inner{\n        border-color:#55a12f;\n    }\n"]);return x=function(){return e},e}function C(){var e=q(["\n    float:left;\n    line-height:30px;\n    color:#333;\n    margin-right:20px;\n    span{\n        display:inline-block;\n        line-height:30px;\n        color:red;\n        margin-right:5px;\n    }\n    width:200px;\n    text-align:right;\n    &.addnew-title{\n        color:#666;\n        margin-bottom:20px;\n        font-weight:600;\n    }\n"]);return C=function(){return e},e}function T(){var e=q(["\nwidth:700px;\n    margin:30px auto 50px;\n"]);return T=function(){return e},e}function H(){var e=q(["\n    width:70px;\n    height:30px;\n    border-radius:2px;\n    font-size:14px;\n    text-align:center;\n    line-height:30px;\n    margin:15px 0;\n    cursor:pointer;\n    &.add-save{\n        background:#55a12f;\n        color:#FFF;\n        margin-right:30px;\n    }\n    &.add-cancel{\n        color:#666;\n    }\n"]);return H=function(){return e},e}function W(){var e=q(["\n    float:right;\n    display:flex;\n    justify-content:flex-end;\n"]);return W=function(){return e},e}function M(){var e=q(["\n    display:block;\n    line-height:60px;\n    font-size:16px;\n    color:#333;\n    float:left;\n    margin-left:30px;\n"]);return M=function(){return e},e}function J(){var e=q(["\n    height:60px;\n    border-bottom:1px solid #f7f7f7;\n    overflow:hidden;\n"]);return J=function(){return e},e}function U(){var e=q(["\n    margin-bottom:50px;\n"]);return U=function(){return e},e}function q(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var G=f.b.div(U()),K=f.b.div(J()),$=f.b.span(M()),Q=f.b.div(W()),X=f.b.div(H()),Y=f.b.div(T()),Z=f.b.div(C()),ee=f.b.div(x()),te=(f.b.div(S()),f.b.ul(N())),ae=f.b.li(b()),ne=f.b.div(g()),le=f.b.div(y()),re=f.b.div(v()),ie=f.b.div(E()),se=f.b.div(h());function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var fe=function(){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),pe(de(t=function(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?de(e):t}(this,ue(a).call(this,e))),"handleCancel",function(e){t.setState({previewVisible:!1})}),pe(de(t),"handlePreview",function(e){t.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}),pe(de(t),"handleChange",function(e,t,a){}),t.state={value:0,previewVisible:!1,previewImage:"",fileList:[],attachFile:[],savefileList:[],saveattachFile:[],loading:!1,systemData:{},kindSelected:void 0,customerDetail:{},noupdate1:!1,noupdate2:!1,isdemand:void 0,iskindtype:void 0,isbeizhu:"",isy:!1,isloading:!1},t.clearData=t.clearData.bind(de(t)),t.getBase64=t.getBase64.bind(de(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(a,I["Component"]),function(e,t,a){t&&oe(e.prototype,t),a&&oe(e,a)}(a,[{key:"render",value:function(){var n=this,e=this.props,t=e.isAdd,a=e.addClickLi,l=e.cusEdit,r=e.homeList,i=this.state,s=i.previewVisible,c=i.previewImage,o=i.systemData,u={};u=this.props.customerDetail;var d="",m=this.state.isbeizhu,p=this.state.value,f=this.state.kindSelected,h=this.state.isdemand,E=this.state.iskindtype,v=/\.(png|jpe?g|gif|svg)(\?.*)?$/,y=this.state.fileList,g=this.state.attachFile,b=[],N=[],S=[];if(t&&!l&&(y=[],g=[]),l)if(d=u.customerId,m=u.relatRemark,p=u.isBusinessPartner,f=u.industryClass?u.industryClass:void 0,null==u.financialDemand?h=void 0:"1"==u.financialDemand.toString()?h="1":"0"==u.financialDemand.toString()&&(h="0"),E=u.existingBusinessType?u.existingBusinessType:void 0,y=[],g=[],u.attachs.length){for(var x=0;x<u.attachs.length;x++){var C={};C.origName=u.attachs[x].origName,C.attachPath=u.attachs[x].attachPath,C.attachId=u.attachs[x].attachId,C.uid=u.attachs[x].attachId,C.name=u.attachs[x].origName,C.status="done",C.attachSuffix=u.attachs[x].attachSuffix,C.url=u.attachHost+u.attachs[x].attachPath,S.push(C)}for(var w=0;w<S.length;w++)v.test(S[w].attachSuffix)?b.push(S[w]):N.push(S[w]);y=this.state.noupdate1?this.state.fileList:b.concat(this.state.fileList),g=this.state.noupdate2?this.state.attachFile:N.concat(this.state.attachFile)}else y=this.state.fileList,g=this.state.attachFile;else y=this.state.fileList,g=this.state.attachFile;var k=F.a.Group,A=D.a.Option,L=z.a.TextArea,T=O.a.createElement("div",null,O.a.createElement(B.a,{type:"plus"}),O.a.createElement("div",{className:"ant-upload-text"},"上传"));return O.a.createElement(G,{className:t||l?"isShow overflow":"isHide overflow"},O.a.createElement(K,null,O.a.createElement($,null,"新建客户"),O.a.createElement(Q,null,O.a.createElement(X,{className:"add-cancel",onClick:function(){n.handlecusCancel(r)}},"取消"),O.a.createElement(X,{className:"add-save",onClick:function(){n.handleSaveData(n.cusNameEl,n.cusIdcardEl,n.cusMobileEl,n.cusAddressEl,n.cusConEl,n.cusCompanyEl,p,f,n.cusMoneyEl,y,g,d,n.cusadddizhiEl,n.cusaddryEl,n.cusaddmjEl,n.cusaddyyEl,n.cusaddzcEl,n.cusaddxyEl,h,n.cusaddxqEl,E,n.cusaddywEl,n.cusaddxmEl,n.cusaddsfzEl,n.cusaddgxEl,n.cusaddlxEl,n.cusaddbzEl)}},"保存"))),O.a.createElement(Y,null,O.a.createElement(I.Fragment,null,O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null,"*"),"客户姓名"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusNameEl=e},value:u&&u.name?u.name:"",onChange:function(){n.setValue(n.cusNameEl,1)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null,"*"),"身份证号码"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusIdcardEl=e},value:u&&u.idcard?u.idcard:"",onChange:function(){n.setValue(n.cusIdcardEl,2)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null,"*"),"手机号码"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusMobileEl=e},value:u&&u.mobilePhone?u.mobilePhone:"",onChange:function(){n.setValue(n.cusMobileEl,3)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null,"*"),"常住地址"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusAddressEl=e},value:u&&u.address?u.address:"",onChange:function(){n.setValue(n.cusAddressEl,4)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"行业分类"),O.a.createElement(D.a,{showSearch:!0,style:{width:"60%",marginBottom:20},placeholder:"请选择",optionFilterProp:"children",onChange:function(e){n.customkind(e,u)},value:f,filterOption:function(e,t){return 0<=t.props.children.toLowerCase().indexOf(e.toLowerCase())}},o.industryClass&&o.industryClass.map(function(e,t){return O.a.createElement(A,{key:e},e)})),O.a.createElement(te,{className:"add-ul"},O.a.createElement(ae,{onClick:function(){a(2)}},"1"))),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"公司(店铺)名称"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusCompanyEl=e},value:u&&u.companyName?u.companyName:"",onChange:function(){n.setValue(n.cusCompanyEl,6)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"经营内容"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusConEl=e},value:u&&u.businessContent?u.businessContent:"",onChange:function(){n.setValue(n.cusConEl,5)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"经营地址"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusadddizhiEl=e},value:u&&u.businessAddress?u.businessAddress:"",onChange:function(){n.setValue(n.cusadddizhiEl,8)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"工作人员数量"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",type:"number",ref:function(e){n.cusaddryEl=e},value:u&&u.staffNum?u.staffNum:"",onChange:function(){n.setValue(n.cusaddryEl,9)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"生产经营面积"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusaddmjEl=e},value:u&&u.businessArea?u.businessArea:"",onChange:function(){n.setValue(n.cusaddmjEl,10)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"年营业额(近三年平均)"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",type:"number",ref:function(e){n.cusaddyyEl=e},value:u&&u.yearlyTurnover?u.yearlyTurnover:"",onChange:function(){n.setValue(n.cusaddyyEl,11)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"资产情况(万元)"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",type:"number",ref:function(e){n.cusaddzcEl=e},value:u&&u.property?u.property:"",onChange:function(){n.setValue(n.cusaddzcEl,12)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"负债情况(万元)"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",type:"number",ref:function(e){n.cusMoneyEl=e},value:u&&u.liabilities?u.liabilities:"",onChange:function(){n.setValue(n.cusMoneyEl,7)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"信用情况(人品、口碑)"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusaddxyEl=e},value:u&&u.creditInfo?u.creditInfo:"",onChange:function(){n.setValue(n.cusaddxyEl,13)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"有无融资需求"),O.a.createElement(D.a,{style:{width:"60%",marginBottom:20},placeholder:"请选择",optionFilterProp:"children",onChange:function(e){n.customrz(e,u)},value:h,filterOption:function(e,t){return 0<=t.props.children.toLowerCase().indexOf(e.toLowerCase())}},O.a.createElement(A,{key:"1"},"有"),O.a.createElement(A,{key:"0"},"无"))),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"需求金额(万元)"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",type:"number",ref:function(e){n.cusaddxqEl=e},value:u&&u.demandAmount?u.demandAmount:"",onChange:function(){n.setValue(n.cusaddxqEl,14)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"已与我行发生业务种类"),O.a.createElement(D.a,{style:{width:"60%",marginBottom:20},placeholder:"请选择",optionFilterProp:"children",onChange:function(e){n.customkindtype(e,u)},value:E,filterOption:function(e,t){return 0<=t.props.children.toLowerCase().indexOf(e.toLowerCase())}},o.existingBusinessType&&o.existingBusinessType.map(function(e,t){return O.a.createElement(A,{key:e},e)}))),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"已发生业务金额"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",type:"number",ref:function(e){n.cusaddywEl=e},value:u&&u.existingBusinessAmount?u.existingBusinessAmount:"",onChange:function(){n.setValue(n.cusaddywEl,15)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"是否有经营合伙人"),O.a.createElement(k,{className:"radio-group",onChange:function(e){n.changeRadio(e,u,l)},value:p},O.a.createElement(F.a,{value:1},"有"),O.a.createElement(F.a,{value:0},"无")),O.a.createElement("p",null)),O.a.createElement("div",{className:1==p?"isShow":"isHide"},O.a.createElement(ee,{className:"clear-fix clear-fix-new"},O.a.createElement(Z,{className:"addnew-title"},O.a.createElement("span",null),"关联人相关信息"),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"关联人姓名"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusaddxmEl=e},value:u&&u.relatName?u.relatName:"",onChange:function(){n.setValue(n.cusaddxmEl,16)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"关联人身份证号码"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusaddsfzEl=e},value:u&&u.relatIdcard?u.relatIdcard:"",onChange:function(){n.setValue(n.cusaddsfzEl,17)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"关联人关系"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusaddgxEl=e},value:u&&u.relatRelationship?u.relatRelationship:"",onChange:function(){n.setValue(n.cusaddgxEl,18)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"关联人联系电话"),O.a.createElement("input",{className:"add-input",placeholder:"请输入",ref:function(e){n.cusaddlxEl=e},value:u&&u.relatPhone?u.relatPhone:"",onChange:function(){n.setValue(n.cusaddlxEl,19)}}),O.a.createElement("p",null)),O.a.createElement(ee,{className:"clear-fix"},O.a.createElement(Z,null,O.a.createElement("span",null),"关联人备注"),O.a.createElement(L,{rows:4,value:m,className:"msg-textarea",ref:function(e){n.cusaddbzEl=e},onChange:function(){n.setValue(n.cusaddbzEl,20,l)}}),O.a.createElement("p",null))),O.a.createElement(ne,null,O.a.createElement(Z,null,O.a.createElement("span",null),"图片上传"),O.a.createElement(le,null,O.a.createElement("div",{className:"clearfix"},O.a.createElement(R.a,{accept:".jpg, .jpeg, .png",customRequest:function(e){n.customRequest(e)},listType:"picture-card",fileList:y,multiple:!0,onPreview:function(e){n.handlePreview(e)},onChange:function(e,t,a){n.handleChange(e,t,a)},onRemove:function(e){n.handleonRemove(e,u,y,1)},beforeUpload:function(e,t){n.beforeUpload(e,t)}},9<=y.length?null:T),O.a.createElement(P.a,{visible:s,footer:null,onCancel:function(e){n.handleCancel(e)}},O.a.createElement("img",{alt:"example",style:{width:"100%"},src:c}))))),O.a.createElement(re,null,O.a.createElement(Z,null,O.a.createElement("span",null),"附件上传"),g.map(function(e,t){return O.a.createElement(ie,{key:e.uid},O.a.createElement(se,null,e.name),O.a.createElement("span",{className:"iconfont",onClick:function(){n.handleonRemove(e,u,g,2)}},""))}),O.a.createElement(le,null,O.a.createElement("div",{className:"clearfix clearfix-two"},O.a.createElement(R.a,{accept:".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document",customRequest:function(e){n.attachRequest(e)},fileList:g},O.a.createElement(V.a,{className:"uploadButton"},O.a.createElement(B.a,{type:"upload"})," 附件上传"))))))))}},{key:"componentDidUpdate",value:function(){var e=this;this.props.nofile&&this.setState({fileList:[]},function(){e.commonfun()})}},{key:"commonfun",value:function(){this.props.dishandlenone(!1)}},{key:"componentDidMount",value:function(){var a=this;if(Object(_.p)().then(function(e){var t=e.data;1===t.code&&"success"===t.msg&&a.setState({systemData:t.data},function(){})}),this.props.cusEdit&&this.setState({kindSelected:this.props.customerDetail.industryClass?this.props.customerDetail.industryClass:""},function(){}),this.props.customerDetail){var e="";e=this.props.customerDetail.industryClass?this.props.customerDetail.industryClass:void 0,this.setState({kindSelected:e})}}},{key:"beforeUpload",value:function(e,t){}},{key:"changeRadio",value:function(e,t,a){a?(t.isBusinessPartner=e.target.value,this.props.disCusDetail(t)):this.setState({value:e.target.value})}},{key:"customkind",value:function(e,t){this.props.cusEdit?(t.industryClass=e,this.props.disCusDetail(t)):this.setState({kindSelected:e})}},{key:"handleSaveData",value:function(e,t,a,n,l,r,i,s,c,o,u,d,m,p,f,h,E,v,y,g,b,N,S,x,C,w,k){for(var A=this,L={attachs:[{}]},T=o.concat(u),I="",O=0;O<T.length;O++)I=T[O].uid,L["attachs["+O+"].attachId"]=I;if(e.value)if(t.value&&_.h.test(t.value))if(a.value&&_.i.test(a.value))if(n.value){if(L.name=e.value,L.idcard=t.value,L.mobilePhone=a.value,L.address=n.value,L.businessContent=l.value,L.companyName=r.value,L.isBusinessPartner=i,L.industryClass=s,L.liabilities=c.value,L.businessAddress=m.value,L.businessArea=f.value,L.staffNum=p.value,L.yearlyTurnover=h.value,L.property=E.value,L.creditInfo=v.value,L.financialDemand=y,L.demandAmount=g.value,L.existingBusinessType=b,L.existingBusinessAmount=N.value,L.relatName=S.value,L.relatIdcard=x.value,L.relatRelationship=C.value,L.relatPhone=w.value,L.relatRemark=k.textAreaRef.value,0==i)L.relatName="",L.relatIdcard="",L.relatRelationship="",L.relatPhone="",L.relatRemark="";else if(x.value){if(!_.h.test(x.value))return void j.a.error("请输入关联人正确身份证号码")}else if(w.value&&!_.i.test(w.value))return void j.a.error("请输入关联人正确电话号码");d?(L.customerId=d,Object(_.k)(L).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?j.a.success("编辑成功"):j.a.error(t.msg)})):Object(_.a)(L).then(function(e){var t=e.data;if(1===t.code&&"success"===t.msg){j.a.success("添加成功");A.props.disCusDetail({}),A.setState({kindSelected:void 0,isdemand:void 0,iskindtype:void 0,isbeizhu:"",fileList:[],attachFile:[]}),A.props.handleCusEdit(!1),A.props.handleAddStatus(!0)}else j.a.error(t.msg)})}else j.a.error("请输入常住地址");else j.a.error("请输入正确电话号码");else j.a.error("请输入正确身份证号码");else j.a.error("请输入客户姓名")}},{key:"handlecusCancel",value:function(e){this.clearData(),this.props.dishandlecusCancel(e)}},{key:"clearData",value:function(){var e=this.props.customerDetail;e.name="",e.idcard="",e.mobilePhone="",e.address="",e.businessContent="",e.companyName="",e.liabilities="",e.businessAddress="",e.staffNum="",e.businessArea="",e.yearlyTurnover="",e.property="",e.creditInfo="",e.demandAmount="",e.existingBusinessAmount="",e.relatName="",e.relatIdcard="",e.relatRelationship="",e.relatPhone="",e.attachs=[],this.setState({isbeizhu:"",customerDetail:e,kindSelected:void 0,isdemand:void 0,iskindtype:void 0,fileList:[],attachFile:[]})}},{key:"getBase64",value:function(n){return new Promise(function(e,t){var a=new FileReader;a.readAsDataURL(n),a.onload=function(){return e(a.result)},a.onerror=function(e){return t(e)}})}},{key:"handleonRemove",value:function(a,n,l,e){var r=this,t={attachId:a.uid};if(n&&n.attachs)for(var i=0;i<n.attachs.length;i++)n.attachs[i].attachId===a.attachId&&(n.attachs.splice(i,1),this.props.disCusDetail(n));n&&n.customerId&&(l.map(function(e,t){return e===a?l.splice(t,1):""}),1===e?this.setState({fileList:l,noupdate1:!0},function(){}):2===e&&this.setState({attachFile:l,noupdate2:!0},function(){})),n&&n.customerId||(l.map(function(e,t){return e===a?l.splice(t,1):""}),1===e?this.setState({fileList:l},function(){}):2===e&&this.setState({attachFile:l},function(){})),Object(_.g)(t).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?(j.a.success("删除成功"),r.props.disCusDetail(n)):j.a.error(t.msg)})}},{key:"customRequest",value:function(e){var n=this;j.a.loading("上传中...",0);var t=new FormData,l=[],r={};t.append("file",e.file),Object(_.q)("/attach/upload",t).then(function(e){var t=e.data;if(1===t.code&&"success"===t.msg){j.a.destroy(),j.a.success("上传成功");var a=n.state.fileList;r.origName=t.data.list[0].origName,r.attachPath=t.data.list[0].attachPath,r.attachId=t.data.list[0].attachId,r.uid=t.data.list[0].attachId,r.name=t.data.list[0].origName,r.status="done",r.url=t.data.attachHost+t.data.list[0].attachPath,l.push(r),n.setState({fileList:a.concat(l)})}else j.a.destroy(),j.a.success("上传失败")}).catch(function(e){j.a.destroy()})}},{key:"attachRequest",value:function(e){var n=this;j.a.loading("上传中...",0);var t=new FormData,l=[],r={};t.append("file",e.file),Object(_.q)("/attach/upload",t).then(function(e){var t=e.data;if(1===t.code&&"success"===t.msg){j.a.destroy(),j.a.success("上传成功");var a=n.state.attachFile;r.origName=t.data.list[0].origName,r.attachPath=t.data.list[0].attachPath,r.attachId=t.data.list[0].attachId,r.uid=t.data.list[0].attachId,r.name=t.data.list[0].origName,r.status="done",r.url=t.data.attachHost+t.data.list[0].attachPath,l.push(r),n.setState({attachFile:a.concat(l)},function(){})}else j.a.destroy(),j.a.success("上传失败")}).catch(function(e){j.a.destroy(),j.a.error(e.msg)})}},{key:"handleAttachDel",value:function(a,n){n.map(function(e,t){return e===a?n.splice(t,1):""}),this.setState({attachFile:n})}},{key:"setValue",value:function(e,t,a){var n=this.props.customerDetail;1===t?n.name=e.value:2===t?n.idcard=e.value:3===t?n.mobilePhone=e.value:4===t?n.address=e.value:5===t?n.businessContent=e.value:6===t?n.companyName=e.value:7===t?n.liabilities=e.value:8===t?n.businessAddress=e.value:9===t?n.staffNum=e.value:10===t?n.businessArea=e.value:11===t?n.yearlyTurnover=e.value:12===t?n.property=e.value:13===t?n.creditInfo=e.value:14===t?n.demandAmount=e.value:15===t?n.existingBusinessAmount=e.value:16===t?n.relatName=e.value:17===t?n.relatIdcard=e.value:18===t?n.relatRelationship=e.value:19===t?n.relatPhone=e.value:20===t&&(a?n.relatRemark=e.textAreaRef.value:this.setState({isbeizhu:e.textAreaRef.value})),this.setState({customerDetail:n},function(){})}},{key:"customrz",value:function(e,t){this.props.cusEdit?(t.financialDemand=e,this.props.disCusDetail(t)):this.setState({isdemand:e})}},{key:"customkindtype",value:function(e,t){this.props.cusEdit?(t.existingBusinessType=e,this.props.disCusDetail(t)):this.setState({iskindtype:e})}}]),a}(),he=Object(n.connect)(function(e){return{isAdd:e.getIn(["left","isAdd"]),customerDetail:e.getIn(["left","customerDetail"]).toJS(),cusEdit:e.getIn(["left","cusEdit"]),homeList:e.getIn(["left","homeList"]),nofile:e.getIn(["left","nofile"])}},function(i){return{addClickLi:function(e){document.getElementsByClassName("add-ul")[0].classList.remove("add-ul-show")},dishandlecusCancel:function(e){for(var t=e.toJS(),a=0;a<t.length;a++)t[a].active=!1;var n=s.a.changeCusEdit(!1);i(n);var l=s.a.changeIsAdd({isAdd:!1});i(l);var r=s.a.getMiddleList(t);i(r)},handleCusEdit:function(e){var t=s.a.changeCusEdit(e);i(t)},handleAddStatus:function(e){var t=s.a.changeAddStatus(e);i(t)},disCusDetail:function(e){var t=s.a.changeCusDetail(e);i(t)},dishandlenone:function(e){var t=s.a.changenofileList(e);i(t)}}})(fe);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Se=function(){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Ne(ge(t=function(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?ge(e):t}(this,ye(a).call(this,e))),"handlePreview",function(e){t.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}),Ne(ge(t),"handleCancel",function(e){t.setState({previewVisible:!1})}),t.state={chatStatus:!1,transStatus:!1,totransfer:[],newUserId:"",careStatus:!1,carefullReason:"",previewVisible:!1,previewImage:""},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(a,I["PureComponent"]),function(e,t,a){t&&ve(e.prototype,t),a&&ve(e,a)}(a,[{key:"render",value:function(){var a=this,e=this.props,n=e.customerDetail,t=e.spin,l=e.isAdd,r=e.showDetail,i=this.state,s=i.transStatus,c=i.totransfer,o=i.newUserId,u=i.careStatus,d=i.carefullReason,m=i.previewImage,p=i.previewVisible,f=JSON.parse(sessionStorage.getItem("user")),h=P.a.confirm,E=z.a.TextArea,v=[],y=[],g=[],b=[],N=/\.(png|jpe?g|gif|svg)(\?.*)?$/;if(this.props.homeList&&(v=this.props.homeList.toJS()),n&&n.customerId&&n.attachs&&n.attachs.length){for(var S=0;S<n.attachs.length;S++){var x={};x.origName=n.attachs[S].origName,x.attachPath=n.attachs[S].attachPath,x.attachId=n.attachs[S].attachId,x.uid=n.attachs[S].attachId,x.name=n.attachs[S].origName,x.status="done",x.attachSuffix=n.attachs[S].attachSuffix,x.url=n.attachHost+n.attachs[S].attachPath,b.push(x)}for(var C=0;C<b.length;C++)N.test(b[C].attachSuffix)?(y.push(b[C]),y.map(function(e,t){return e.uid=e.uid.toString()})):g.push(b[C])}return O.a.createElement(A.k,{className:"detailWrapper"},O.a.createElement(he,null),O.a.createElement("div",{className:r?"isShow newheight":"isHide newheight"},O.a.createElement(A.E,{className:t||!n?"isOpacity":""},2===f.userType?O.a.createElement(I.Fragment,null,O.a.createElement(w.a,{title:"",onClick:function(){a.handleTipDel(n,h,v)}},O.a.createElement("div",{className:"reset-shanchu"})),O.a.createElement(w.a,{title:"",onClick:function(){a.handleTipEdit(n,h,v)}},O.a.createElement("div",{className:"reset-fangbj"})),O.a.createElement(w.a,{title:"",onClick:function(){a.handleTipTran(n,h,v,s)}},O.a.createElement("div",{className:"reset-yijiao"}))):"",3===f.userType?O.a.createElement(I.Fragment,null,O.a.createElement(A.e,null,O.a.createElement(A.g,null,n.name),O.a.createElement(A.d,null,O.a.createElement("button",{onClick:function(){a.handlerefuse(a.carefulrea,u)}},"拒绝"),O.a.createElement("button",{onClick:function(){a.handlepass(n.customerId)}},"通过")))):""),O.a.createElement(A.F,null,O.a.createElement("div",{className:t||!n?"isHide":"isShow"},O.a.createElement(A.D,null,O.a.createElement("tbody",null,O.a.createElement("tr",null,O.a.createElement("td",null,"客户姓名"),O.a.createElement("td",null,n&&n.name||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"身份证号码"),O.a.createElement("td",null,n&&n.idcard||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"手机号码"),O.a.createElement("td",null,n&&n.mobilePhone||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"常住地址"),O.a.createElement("td",null,n&&n.address||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"行业分类"),O.a.createElement("td",null,n&&n.industryClass||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"公司(店铺)名称"),O.a.createElement("td",null,n&&n.companyName||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"经营内容"),O.a.createElement("td",null,n&&n.businessContent||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"经营地址"),O.a.createElement("td",null,n&&n.businessAddress||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"工作人员数量"),O.a.createElement("td",null,n&&n.staffNum||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"生产经营面积"),O.a.createElement("td",null,n&&n.businessArea||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"年营业额(近三年平均)"),O.a.createElement("td",null,n&&n.yearlyTurnover||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"资产情况(万元)"),O.a.createElement("td",null,n&&n.property||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"负债情况(万元)"),O.a.createElement("td",null,n&&n.liabilities||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"信用情况(人品、口碑)"),O.a.createElement("td",null,n&&n.creditInfo||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"有无融资需求"),O.a.createElement("td",null,n&&1==n.financialDemand?"有":"无")),O.a.createElement("tr",null,O.a.createElement("td",null,"需求金额(万元)"),O.a.createElement("td",null,n&&n.demandAmount||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"已与我行发生业务种类"),O.a.createElement("td",null,n&&n.existingBusinessType||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"已发生业务金额"),O.a.createElement("td",null,n&&n.existingBusinessAmount||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"是否有经营合伙人"),O.a.createElement("td",null,n&&0===n.isBusinessPartner?"无":"有")),O.a.createElement("tr",null,O.a.createElement("td",null,"关联人姓名"),O.a.createElement("td",null,n&&n.relatName||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"关联人身份证号码"),O.a.createElement("td",null,n&&n.relatIdcard||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"关联人关系"),O.a.createElement("td",null,n&&n.relatRelationship||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"关联人联系电话"),O.a.createElement("td",null,n&&n.relatPhone||O.a.createElement("span",{className:"no-data"},"暂无"))),O.a.createElement("tr",null,O.a.createElement("td",null,"关联人备注"),O.a.createElement("td",null,n&&n.relatRemark||O.a.createElement("span",{className:"no-data"},"暂无"))))),n.attachs&&n.attachs.length?O.a.createElement(I.Fragment,null,O.a.createElement("div",{className:"list-photo"},O.a.createElement(R.a,{accept:".jpg, .jpeg, .png, svg, gif, .bmp",listType:"picture-card",fileList:y,onPreview:function(e){a.handlePreview(e)}},9<=y.length?null:""),O.a.createElement(P.a,{visible:p,footer:null,onCancel:function(e){a.handleCancel(e)}},O.a.createElement("img",{alt:"example",style:{width:"100%"},src:m})),O.a.createElement("p",{className:"clear"}))):"",O.a.createElement(A.o,null,g&&g.length?g.map(function(e,t){return O.a.createElement(A.n,{key:e.customerId,onClick:function(){a.handleAttachDownload(e,g)}},O.a.createElement("span",{className:"iconfont"},""),e.name)}):"")),t?O.a.createElement("div",{className:"example"},O.a.createElement(L.a,{className:"example",delay:100,size:"large"})):""),O.a.createElement(A.B,{ref:function(e){a.blockEl=e},className:s?"active":""},O.a.createElement("div",null,O.a.createElement(A.O,{className:"editSrollBar trans-wrapper"},c&&c.map(function(e,t){return O.a.createElement(A.N,{className:e.active?"trans-box-active trans-box":" trans-box",key:e.cabinetNo,onClick:function(){a.handleTransfer(e,c,n,s)}},e.photo?O.a.createElement("img",{src:e.photo,alt:""}):O.a.createElement("div",{className:"moren-img"}),O.a.createElement(A.K,{className:"trans-item"},O.a.createElement("div",null,O.a.createElement("span",{className:"title trans-title"},e.name),O.a.createElement("span",{className:"mobile trans-mobile"},e.mobilePhone)),O.a.createElement("div",{className:"idCard trans-idCard"},e.cabinetNo)))})),O.a.createElement("div",{className:"botton-wrapper"},O.a.createElement("div",{className:"chat-send",onClick:function(){a.handleTrans(n,o,s)}},"确认移交")))),O.a.createElement(A.f,{ref:function(e){return a.carefulrea=e},className:u?"active":""},O.a.createElement("p",{className:"care-title"},"拒绝理由"),O.a.createElement(E,{className:"care-textarea",rows:6,placeholder:"输入拒绝理由",ref:function(e){return a.textArea=e},onChange:function(){a.carefullReaTxt(a.textArea)},value:d}),O.a.createElement("div",{className:"care-send",onClick:function(){a.handleCareful(d,n.customerId,u)}},"拒绝"))),r||l?"":O.a.createElement(k.a,{className:"",description:"暂无数据"}))}},{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("detailWrapper")[0].clientHeight;this.carefulrea.style.height=e-60+"px",this.blockEl.style.height=e-60+"px"}},{key:"handleAttachDownload",value:function(e,t){window.open(e.url)}},{key:"handleTipDel",value:function(t,e,a){this.setState({transStatus:!1});var n=this;e({title:"确认删除?",okText:"确定",cancelText:"取消",onOk:function(){var e={customerIds:t.customerId};Object(_.r)(e).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?(j.a.success("删除成功"),n.props.handleChangeStatus(!0),n.props.disShowDetail(!1)):j.a.error(t.msg)})},onCancel:function(){}})}},{key:"handleTipEdit",value:function(e,t,a){this.setState({transStatus:!1});this.props.isAddAction({isAdd:!0}),this.props.disShowDetail(!1),this.props.handleCusEdit(!0)}},{key:"handleTipChat",value:function(e,t,a,n){this.setState({chatStatus:!n})}},{key:"handleTipTran",value:function(e,t,a,n){var l=this;this.setState({transStatus:!n}),Object(_.x)().then(function(e){var t=e.data;1===t.code&&"success"===t.msg?t.data?(t.data.map(function(e,t){return e.active=!1}),l.setState({totransfer:t.data})):j.a.info(t.msg):j.a.error(t.msg)})}},{key:"handleTransfer",value:function(e,t,a,n){t.map(function(e,t){return e.active=!1}),e.active=!0,this.setState({totransfer:t,newUserId:e.userId})}},{key:"handleTrans",value:function(e,t,a){var n=this,l={customerIds:e.customerId,newUserId:t};Object(_.w)(l).then(function(e){var t=e.data;if(1===t.code&&"success"===t.msg){j.a.success("移交成功");n.props.isAddAction({isAdd:!1}),n.props.disShowDetail(!1),n.props.handleChangeTrans(!0),n.setState({transStatus:!a})}else j.a.error(t.msg)})}},{key:"handlerefuse",value:function(e,t){this.setState({careStatus:!t})}},{key:"handleCareful",value:function(e,t,a){var n=this;if(e){var l={id:t,status:2,auditReason:e};Object(_.c)(l).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?(j.a.success("操作成功"),n.props.handleChangeStatus(!0),n.props.disShowDetail(!1),n.setState({careStatus:!a})):j.a.success(t.msg)})}else j.a.error("请输入理由")}},{key:"carefullReaTxt",value:function(e){var t=e.textAreaRef.value;this.setState({carefullReason:t})}},{key:"handlepass",value:function(e){var a=this,t={id:e,status:1};Object(_.c)(t).then(function(e){var t=e.data;1===t.code&&"success"===t.msg?(j.a.success("操作成功"),a.props.handleChangeStatus(!0),a.props.disShowDetail(!1)):j.a.success(t.msg)})}}]),a}(),xe=Object(n.connect)(function(e){return{fileList:e.getIn(["left","userInfo"]).toJS().fileList,spin:e.getIn(["left","spin"]),isAdd:e.getIn(["left","isAdd"]),edit:e.getIn(["left","edit"]),customerDetail:e.getIn(["left","customerDetail"]).toJS(),showDetail:e.getIn(["left","showDetail"]),homeList:e.getIn(["left","homeList"])}},function(a){return{disNewMidList:function(e){var t=s.a.getMiddleList(e);a(t)},disShowDetail:function(e){var t=s.a.changeShowDetail(e);a(t)},disCusDetail:function(e){var t=s.a.changeCusDetail(e);a(t)},disSpin:function(e){var t=s.a.changeSpin(e);a(t)},isAddAction:function(e){var t=s.a.changeIsAdd(e);a(t)},handleCusEdit:function(e){var t=s.a.changeCusEdit(e);a(t)},handleChangeStatus:function(e){var t=s.a.changeAddStatus(e);a(t)},handleChangeTrans:function(e){var t=s.a.changeTransStatus(e);a(t)}}})(Se);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=ke(this,Ae(a).call(this,e))).state={login:Object(_.u)("token")},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(a,I["PureComponent"]),function(e,t,a){t&&we(e.prototype,t),a&&we(e,a)}(a,[{key:"render",value:function(){if(this.state.login){var e=JSON.parse(sessionStorage.getItem("user"));return e&&1===e.userType?O.a.createElement(l.c,{to:"/user"}):O.a.createElement(A.h,null,O.a.createElement(r.a,null),O.a.createElement(A.C,null,O.a.createElement(p,null),O.a.createElement(xe,null)))}return O.a.createElement(l.c,{to:"/login"})}},{key:"componentDidMount",value:function(){this.props.handleaddSatus({isAdd:!1})}}]),a}();t.default=Object(n.connect)(function(e){return{}},function(a){return{handleaddSatus:function(e){var t=s.a.changeIsAdd(e);a(t)}}})(Te)}}]);